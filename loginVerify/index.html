<script>
  const query = location.href.split('?').pop();
  const vars = query.split('&');
  const arrayQuery = [];
  vars.forEach((item, index) => {
    arrayQuery.push({ value: item.split('=')[0], content: item.split('=')[1] })
    if( index >= ( vars.length - 1 ) ) continueProcess();
  })
  function continueProcess() {
    class Props {
      constructor() {
        this.href = '';
        this.sucess = '';
      }
      set setRef(x) {
        this.href = x;  
      }
      set verify(x) {
        this.sucess = x
        this.process();
      }
      static process() {
        if( this.sucess == '' || this.href == '' ) return;
        const var_ = sessionStorage.getItem(this.sucess)
        if( var_ ) location.href = `${this.href}/dashboard`
        else location.href = `${this.href}/login`
      }
    }
    const props = new Props();
    arrayQuery.forEach((item, index) => {
      if( item.value === 'href' ) props.setRef(item.content); 
      else if( item.value === 'sucess' ) props.verify(item.content);
      else if( index >= ( arrayQuery.length - 1 ) ) {
        setTimeout(() => {  
          return;
        }, 3000)
      }
    })
  }
</script>
